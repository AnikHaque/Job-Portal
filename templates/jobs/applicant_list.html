{% extends "base.html" %}
{% block title %}Applicants{% endblock %}
{% block content %}

<h3 class="mb-4">
  Applicants for: {{ job.title }}
</h3>

<table class="table table-bordered align-middle">
  <thead>
    <tr>
      <th>Candidate</th>
      <th>Resume</th>
      <th>Status</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>

    {% for app in applications %}
      <tr>
        <td>{{ app.applicant.username }}</td>

        <td>
          <a href="{{ app.resume.url }}" class="btn btn-sm btn-outline-primary" download>
            â¬‡ Download
          </a>
        </td>

        <td>
          {% if app.status == 'applied' %}
            <span class="badge bg-secondary">Applied</span>
          {% elif app.status == 'shortlisted' %}
            <span class="badge bg-success">Shortlisted</span>
          {% elif app.status == 'rejected' %}
            <span class="badge bg-danger">Rejected</span>
          {% endif %}
        </td>

        <td>
          {% if app.status != 'shortlisted' %}
            <a href="{% url 'update_application_status' app.id 'shortlisted' %}"
               class="btn btn-sm btn-success">
              Shortlist
            </a>
          {% endif %}

          {% if app.status != 'rejected' %}
            <a href="{% url 'update_application_status' app.id 'rejected' %}"
               class="btn btn-sm btn-danger">
              Reject
            </a>
          {% endif %}
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="4" class="text-center">
          No applicants yet.
        </td>
      </tr>
    {% endfor %}

  </tbody>
</table>

{% endblock %}
